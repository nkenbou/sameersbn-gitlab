gitlab-mysql:
  container_name: gitlab-mysql
  image: sameersbn/mysql:latest
  volumes:
    - /vagrant/docker/gitlab/mysql/data:/var/lib/mysql
    - /vagrant/docker/gitlab/mysql/log:/var/log/mysql
  environment:
    DB_NAME: gitlabhq_production
    DB_USER: gitlab
    DB_PASS: password

gitlab-redis:
  container_name: gitlab-redis
  image: sameersbn/redis:latest
  volumes:
    - /vagrant/docker/gitlab/redis/data:/var/lib/redis
    - /vagrant/docker/gitlab/redis/log:/var/log/redis

gitlab:
  container_name: gitlab
  image: sameersbn/gitlab:7.13.4
  links:
    - gitlab-mysql:mysql
    - gitlab-redis:redisio
  ports:
    - "<%= ENV["GITLAB_SSH_PORT"] %>:22"
    - "80"
    - "443"
  volumes:
    - /vagrant/docker/gitlab/gitlab/data:/home/git/data
    - /vagrant/docker/gitlab/gitlab/log:/var/log/gitlab
  env_file: .env
